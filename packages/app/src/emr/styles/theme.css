/* EMR Theme - CSS Custom Properties */
/* This theme system provides consistent colors, gradients, and dimensions across the EMR UI */

:root {
  /* ==================== CORE COLORS ==================== */
  /* Primary blue palette - used for main navigation and primary actions */
  --emr-primary: #1a365d;
  --emr-secondary: #2b6cb0;
  --emr-accent: #63b3ed;
  --emr-light-accent: #bee3f8;

  /* Light blue palette - used for sub-menu tabs (changed from turquoise) */
  --emr-turquoise: #63b3ed; /* Now using accent blue */
  --emr-turquoise-light: #bee3f8; /* Now using light accent blue */
  --emr-turquoise-dark: #3182ce; /* Now using medium blue */

  /* Neutral colors */
  --emr-gray-50: #f9fafb;
  --emr-gray-100: #f3f4f6;
  --emr-gray-200: #e5e7eb;
  --emr-gray-300: #d1d5db;
  --emr-gray-400: #9ca3af;
  --emr-gray-500: #6b7280;
  --emr-gray-600: #4b5563;
  --emr-gray-700: #374151;
  --emr-gray-800: #1f2937;
  --emr-gray-900: #111827;

  /* Text colors */
  --emr-text-primary: #1f2937;
  --emr-text-secondary: #6b7280;
  --emr-text-inverse: #ffffff;

  /* ==================== SEMANTIC COLORS ==================== */
  /* Special purpose colors for UI feedback and highlighting */
  --emr-highlight-search: #c6efce; /* Light green for search match highlighting */
  --emr-section-header-bg: #f8f9fa; /* Section header background (lighter than gray-50) */
  --emr-error-bg: #fff3f3; /* Error message background */
  --emr-error-text: #c92a2a; /* Error message text */


  /* ==================== COLLAPSIBLE SECTION COLORS ==================== */
  /* Color-coded accents for different collapsible section types */
  --emr-section-personal: #2b6cb0; /* Blue accent for personal information sections */
  --emr-section-contact: #3182ce; /* Medium blue accent for contact information sections */
  --emr-section-additional: #63b3ed; /* Light blue accent for additional details sections */
  --emr-section-hover-bg: rgba(99, 179, 237, 0.05); /* Light blue hover background */
  --emr-section-active-bg: rgba(99, 179, 237, 0.08); /* Light blue active background */

  /* ==================== NAVIGATION BACKGROUNDS ==================== */
  --emr-topnav-bg: #e9ecef;
  --emr-mainmenu-bg: #ffffff;
  --emr-submenu-bg: #63b3ed; /* Light blue instead of turquoise */

  /* ==================== GRADIENTS ==================== */
  /* Primary blue gradient - used for active main menu items and action buttons */
  --emr-gradient-primary: linear-gradient(135deg, #1a365d 0%, #2b6cb0 50%, #3182ce 100%);

  /* Secondary gradient - lighter blue for hover states */
  --emr-gradient-secondary: linear-gradient(135deg, #2b6cb0 0%, #3182ce 50%, #63b3ed 100%);

  /* Light blue gradient - used for sub-menu horizontal tabs (changed from turquoise) */
  --emr-gradient-submenu: linear-gradient(90deg, #2b6cb0 0%, #3182ce 50%, #63b3ed 100%);

  /* ==================== TYPOGRAPHY SCALE ==================== */
  /* Standardized font sizes - change --emr-font-base to adjust all text proportionally */
  --emr-font-xs: 11px;      /* Small labels, badges, timestamps */
  --emr-font-sm: 12px;      /* Secondary text, captions */
  --emr-font-base: 13px;    /* Main content: tables, forms, navigation, buttons */
  --emr-font-md: 14px;      /* Emphasized text, form labels */
  --emr-font-lg: 16px;      /* Section headers, card titles */
  --emr-font-xl: 18px;      /* Page titles */
  --emr-font-2xl: 20px;     /* Major headings */
  --emr-font-3xl: 24px;     /* Hero text */

  /* Line heights */
  --emr-line-height-tight: 1.25;
  --emr-line-height-base: 1.5;
  --emr-line-height-relaxed: 1.75;

  /* Font weights */
  --emr-font-normal: 400;
  --emr-font-medium: 500;
  --emr-font-semibold: 600;
  --emr-font-bold: 700;

  /* ==================== LAYOUT DIMENSIONS ==================== */
  --emr-topnav-height: 28px;
  --emr-mainmenu-height: 35px;
  --emr-submenu-height: 30px;
  --emr-content-padding: 24px;

  /* ==================== SHADOWS ==================== */
  --emr-shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --emr-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --emr-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --emr-shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

  /* ==================== DASHBOARD STATS COLORS ==================== */
  /* Status and metric colors for dashboard KPI cards */
  --emr-stat-success: #10b981;
  --emr-stat-warning: #f59e0b;
  --emr-stat-info: #3b82f6;
  --emr-stat-neutral: #6b7280;
  --emr-stat-danger: #ef4444;

  /* Dashboard stat card gradients - using primary blue palette only */
  --emr-stat-gradient-total: linear-gradient(135deg, #2b6cb0 0%, #3182ce 100%);
  --emr-stat-gradient-active: linear-gradient(135deg, #1a365d 0%, #2b6cb0 100%);
  --emr-stat-gradient-pending: linear-gradient(135deg, #3182ce 0%, #63b3ed 100%);
  --emr-stat-gradient-inactive: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%);

  /* ==================== CARD SHADOWS ==================== */
  /* Enhanced shadows for dashboard cards with hover states */
  --emr-shadow-card: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
  --emr-shadow-card-hover: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);

  /* ==================== STATUS BADGE COLORS ==================== */
  /* Standardized colors for status badges across the application */
  --emr-status-active: #10b981;
  --emr-status-pending: #f59e0b;
  --emr-status-inactive: #6b7280;
  --emr-status-locked: #ef4444;

  /* ==================== BORDERS ==================== */
  --emr-border-radius: 6px;
  --emr-border-radius-sm: 4px;
  --emr-border-radius-lg: 8px;
  --emr-border-radius-xl: 12px;
  --emr-border-radius-2xl: 16px;
  --emr-border-color: #e5e7eb;

  /* ==================== TRANSITIONS ==================== */
  --emr-transition-fast: 0.15s ease;
  --emr-transition-base: 0.2s ease;
  --emr-transition-slow: 0.3s ease;
  --emr-transition-smooth: 0.25s cubic-bezier(0.4, 0, 0.2, 1);

  /* ==================== MODERN FORM BUILDER DESIGN TOKENS ==================== */
  /* Side Panel Enhancement Variables */
  --emr-panel-width-palette: 280px;
  --emr-panel-padding: 20px;
  --emr-palette-item-gap: 12px;
  --emr-palette-icon-size: 42px;

  /* Enhanced shadows for side panels */
  --emr-shadow-panel: 2px 0 12px rgba(0, 0, 0, 0.04);
  --emr-shadow-panel-item: 0 1px 4px rgba(0, 0, 0, 0.04), 0 2px 8px rgba(0, 0, 0, 0.02);
  --emr-shadow-panel-item-hover: 0 4px 12px rgba(43, 108, 176, 0.12), 0 2px 6px rgba(0, 0, 0, 0.06);

  /* Glassmorphism effects */
  --emr-glass-bg: rgba(255, 255, 255, 0.85);
  --emr-glass-bg-light: rgba(255, 255, 255, 0.6);
  --emr-glass-border: rgba(255, 255, 255, 0.3);
  --emr-glass-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
  --emr-backdrop-blur: blur(10px);
  --emr-backdrop-blur-lg: blur(20px);

  /* Modern soft shadows */
  --emr-shadow-soft: 0 2px 8px rgba(0, 0, 0, 0.04), 0 4px 16px rgba(0, 0, 0, 0.04);
  --emr-shadow-soft-md: 0 4px 12px rgba(0, 0, 0, 0.05), 0 8px 24px rgba(0, 0, 0, 0.05);
  --emr-shadow-soft-lg: 0 8px 24px rgba(0, 0, 0, 0.06), 0 16px 48px rgba(0, 0, 0, 0.06);
  --emr-shadow-glow: 0 0 20px rgba(99, 179, 237, 0.3);
  --emr-shadow-glow-primary: 0 0 24px rgba(43, 108, 176, 0.25);

  /* Modern accent gradients */
  --emr-gradient-soft: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  --emr-gradient-canvas: linear-gradient(180deg, #fafbfc 0%, #f4f6f8 100%);
  --emr-gradient-card: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
  --emr-gradient-header-modern: linear-gradient(135deg, #1a365d 0%, #2b6cb0 50%, #3182ce 100%);
  --emr-gradient-accent-glow: linear-gradient(135deg, rgba(99, 179, 237, 0.1) 0%, rgba(43, 108, 176, 0.05) 100%);

  /* Modern selection states */
  --emr-selected-bg: rgba(43, 108, 176, 0.08);
  --emr-selected-border: #2b6cb0;
  --emr-hover-bg: rgba(43, 108, 176, 0.04);
  --emr-focus-ring: 0 0 0 3px rgba(43, 108, 176, 0.15);

  /* Scale transforms */
  --emr-scale-hover: 1.02;
  --emr-scale-active: 0.98;

  /* ==================== SPACING ==================== */
  --emr-spacing-xs: 4px;
  --emr-spacing-sm: 8px;
  --emr-spacing-md: 12px;
  --emr-spacing-lg: 16px;
  --emr-spacing-xl: 20px;
  --emr-spacing-2xl: 24px;

  /* ==================== Z-INDEX LAYERS ==================== */
  --emr-z-topnav: 1000;
  --emr-z-mainmenu: 999;
  --emr-z-submenu: 998;
  --emr-z-action-buttons: 997;
  --emr-z-dropdown: 1001;
  --emr-z-modal: 1100;

  /* ==================== EMR TABLE TOKENS ==================== */
  /* Light/Minimal Apple-inspired table design */
  --emr-table-header-bg: #f8f9fa;
  --emr-table-header-text: #374151;
  --emr-table-header-border: #e5e7eb;
  --emr-table-header-font-weight: 600;
  --emr-table-row-bg: #ffffff;
  --emr-table-row-stripe: #fafbfc;
  --emr-table-row-hover: rgba(59, 130, 246, 0.04);
  --emr-table-row-selected: rgba(59, 130, 246, 0.08);
  --emr-table-row-highlight: rgba(16, 185, 129, 0.12);
  --emr-table-border: #e5e7eb;
  --emr-table-border-radius: 8px;
  --emr-table-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04);
  --emr-table-cell-padding: 12px 16px;
  --emr-table-cell-padding-compact: 8px 12px;
  --emr-table-selected-border: #3b82f6;
  --emr-table-sort-icon-active: #3b82f6;
  --emr-table-sort-icon-inactive: #9ca3af;
  --emr-table-action-hover: rgba(59, 130, 246, 0.1);
  --emr-table-checkbox-color: #3b82f6;

  /* ==================== RESPONSIVE BREAKPOINTS ==================== */
  --emr-mobile-breakpoint: 768px;
  --emr-tablet-breakpoint: 1024px;
  --emr-desktop-breakpoint: 1440px;

  /* ==================== FORM INPUT DESIGN TOKENS ==================== */
  /* Standardized form input styling for consistent UI across all forms */
  /* ENHANCED: More visually distinct styling for production-ready forms */

  /* Input Heights (touch-friendly) */
  --emr-input-height-sm: 38px;
  --emr-input-height-md: 44px;
  --emr-input-height-lg: 50px;

  /* Input Colors - ENHANCED with subtle gradient background */
  --emr-input-bg: linear-gradient(180deg, #ffffff 0%, #fafbfc 100%);
  --emr-input-bg-solid: #ffffff;
  --emr-input-bg-disabled: #f3f4f6;
  --emr-input-bg-focus: #ffffff;
  --emr-input-border: #c7d2e0;
  --emr-input-border-hover: #3182ce;
  --emr-input-border-focus: #2b6cb0;
  --emr-input-text: #1a202c;
  --emr-input-text-disabled: #a0aec0;
  --emr-input-placeholder: #a0aec0;

  /* Input Shadow - ENHANCED for depth */
  --emr-input-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.06);
  --emr-input-shadow-hover: 0 4px 12px rgba(49, 130, 206, 0.15);
  --emr-input-shadow-focus: 0 0 0 3px rgba(49, 130, 206, 0.25), 0 4px 12px rgba(49, 130, 206, 0.1);

  /* Input Validation States - ENHANCED with stronger colors */
  --emr-input-error-border: #e53e3e;
  --emr-input-error-bg: #fff5f5;
  --emr-input-error-text: #c53030;
  --emr-input-error-glow: 0 0 0 3px rgba(229, 62, 62, 0.2), 0 4px 12px rgba(229, 62, 62, 0.1);

  --emr-input-success-border: #38a169;
  --emr-input-success-bg: #f0fff4;
  --emr-input-success-text: #276749;
  --emr-input-success-glow: 0 0 0 3px rgba(56, 161, 105, 0.2), 0 4px 12px rgba(56, 161, 105, 0.1);

  --emr-input-warning-border: #dd6b20;
  --emr-input-warning-bg: #fffaf0;
  --emr-input-warning-text: #c05621;
  --emr-input-warning-glow: 0 0 0 3px rgba(221, 107, 32, 0.2), 0 4px 12px rgba(221, 107, 32, 0.1);

  /* Input Focus Ring - ENHANCED with stronger visibility */
  --emr-input-focus-ring: 0 0 0 3px rgba(49, 130, 206, 0.3);
  --emr-input-focus-ring-primary: 0 0 0 4px rgba(43, 108, 176, 0.25);

  /* Input Label - ENHANCED with better contrast */
  --emr-input-label-color: #2d3748;
  --emr-input-label-size: 13px;
  --emr-input-label-weight: 600;
  --emr-input-label-spacing: 8px;

  /* Input Help Text */
  --emr-input-help-color: #718096;
  --emr-input-help-size: 12px;

  /* Required Indicator - Red asterisk */
  --emr-input-required-color: #e53e3e;

  /* Input Dimensions - ENHANCED with more padding */
  --emr-input-padding-x: 14px;
  --emr-input-padding-y: 12px;
  --emr-input-border-radius: 10px;
  --emr-input-font-size: 14px;
  --emr-input-border-width: 1.5px;

  /* Input Icons */
  --emr-input-icon-size: 18px;
  --emr-input-icon-color: #718096;
  --emr-input-icon-color-focus: #2b6cb0;

  /* Input Transitions - Smooth animations */
  --emr-input-transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

  /* Input Accent Colors - For left border accent */
  --emr-input-accent-default: transparent;
  --emr-input-accent-focus: #3182ce;
  --emr-input-accent-filled: #38a169;
}

/* ==================== FONT FAMILIES ==================== */
/* Ensure Georgian characters are supported */
body {
  font-family:
    -apple-system,
    BlinkMacSystemFont,
    'Segoe UI',
    Roboto,
    'Helvetica Neue',
    Arial,
    'Noto Sans',
    'Noto Sans Georgian',
    sans-serif,
    'Apple Color Emoji',
    'Segoe UI Emoji',
    'Segoe UI Symbol';
  font-size: var(--emr-font-base);
}

/* ==================== GLOBAL EMR TEXT SIZING ==================== */
/* Apply standardized font sizes to all EMR content */

/* Form inputs, textareas, selects */
.mantine-TextInput-input,
.mantine-Textarea-input,
.mantine-Select-input,
.mantine-NumberInput-input,
.mantine-DateInput-input,
.mantine-DatePickerInput-input,
.mantine-MultiSelect-input,
.mantine-PasswordInput-input,
.mantine-Autocomplete-input,
input[type="text"],
input[type="number"],
input[type="email"],
input[type="password"],
input[type="search"],
textarea,
select {
  font-size: var(--emr-font-base) !important;
}

/* Form labels */
.mantine-InputWrapper-label,
.mantine-TextInput-label,
.mantine-Select-label,
.mantine-NumberInput-label,
.mantine-Textarea-label,
.mantine-Checkbox-label,
.mantine-Radio-label,
.mantine-Switch-label,
label {
  font-size: var(--emr-font-base) !important;
}

/* Buttons */
.mantine-Button-root,
.mantine-ActionIcon-root,
.mantine-UnstyledButton-root,
button {
  font-size: var(--emr-font-base);
}

/* Table cells and headers */
.mantine-Table-th,
.mantine-Table-td,
th, td {
  font-size: var(--emr-font-base) !important;
}

/* Text elements */
.mantine-Text-root,
p, span, div {
  font-size: inherit;
}

/* Placeholders */
::placeholder {
  font-size: var(--emr-font-base) !important;
}

/* Badges and tags */
.mantine-Badge-root {
  font-size: var(--emr-font-sm) !important;
}

/* Menu items and dropdowns */
.mantine-Menu-item,
.mantine-Select-option {
  font-size: var(--emr-font-base) !important;
}

/* Tabs */
.mantine-Tabs-tab {
  font-size: var(--emr-font-base) !important;
}

/* Cards and Paper */
.mantine-Card-root,
.mantine-Paper-root {
  font-size: var(--emr-font-base);
}

/* Section headers */
h1, .mantine-Title-root[data-order="1"] {
  font-size: var(--emr-font-2xl) !important;
}

h2, .mantine-Title-root[data-order="2"] {
  font-size: var(--emr-font-xl) !important;
}

h3, .mantine-Title-root[data-order="3"] {
  font-size: var(--emr-font-lg) !important;
}

h4, h5, h6 {
  font-size: var(--emr-font-md) !important;
}

/* ==================== UTILITY CLASSES ==================== */
.emr-text-gradient {
  background: var(--emr-gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.emr-bg-gradient-primary {
  background: var(--emr-gradient-primary);
}

.emr-bg-gradient-secondary {
  background: var(--emr-gradient-secondary);
}

.emr-bg-gradient-submenu {
  background: var(--emr-gradient-submenu);
}

.emr-shadow-sm {
  box-shadow: var(--emr-shadow-sm);
}

.emr-shadow-md {
  box-shadow: var(--emr-shadow-md);
}

.emr-shadow-lg {
  box-shadow: var(--emr-shadow-lg);
}

.emr-shadow-xl {
  box-shadow: var(--emr-shadow-xl);
}

/* ==================== FORM BUILDER UTILITY CLASSES ==================== */
/* Panel header - consistent subtle style for FieldPalette and FormCanvas */
.emr-panel-header {
  padding: 12px 16px;
  border-bottom: 1px solid var(--emr-gray-200);
  background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
}

.emr-panel-title {
  color: var(--emr-gray-600);
  font-size: var(--emr-font-xs);
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

/* Field item cards with hover/selected states */
.emr-field-item {
  padding: 12px 14px;
  background: white;
  border: 1px solid var(--emr-gray-200);
  border-radius: var(--emr-border-radius);
  cursor: pointer;
  transition: var(--emr-transition-smooth);
}

.emr-field-item:hover {
  border-color: #93c5fd;
  transform: translateX(2px);
  box-shadow: var(--emr-shadow-soft);
}

.emr-field-item.selected {
  border-color: #3b82f6;
  border-width: 2px;
  background: var(--emr-selected-bg);
  box-shadow: var(--emr-shadow-glow);
}

/* Drop zone styling */
.emr-drop-zone {
  min-height: 400px;
  border: 2px dashed var(--emr-gray-300);
  border-radius: var(--emr-border-radius-xl);
  background: var(--emr-gradient-canvas);
  transition: var(--emr-transition-smooth);
}

.emr-drop-zone.active {
  border-color: #3b82f6;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(59, 130, 246, 0.1) 100%);
  animation: dropPulse 1s ease-in-out infinite;
}

/* Empty state container */
.emr-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px;
  text-align: center;
}

.emr-empty-state-icon {
  width: 120px;
  height: 120px;
  border-radius: 24px;
  background: var(--emr-gradient-accent-glow);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 24px;
  border: 2px dashed var(--emr-gray-300);
}

/* Form Builder specific animations */
@keyframes dropPulse {
  0%, 100% {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(59, 130, 246, 0.1) 100%);
  }
  50% {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.15) 100%);
  }
}

@keyframes emptyStatePulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.7;
  }
  50% {
    transform: scale(1.02);
    opacity: 1;
  }
}

/* Form Builder specific tokens */
:root {
  --emr-builder-panel-width-palette: 240px;
  --emr-builder-panel-width-properties: 320px;
  --emr-builder-header-height: 64px;
  --emr-builder-metadata-height: 100px;
}

/* ==================== FOCUS STATES ==================== */
.emr-focus-visible:focus-visible {
  outline: 2px solid var(--emr-accent);
  outline-offset: 2px;
}

/* ==================== SCROLLBAR STYLING ==================== */
/* Custom scrollbar for EMR components */
.emr-scrollbar::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.emr-scrollbar::-webkit-scrollbar-track {
  background: var(--emr-gray-100);
  border-radius: var(--emr-border-radius-sm);
}

.emr-scrollbar::-webkit-scrollbar-thumb {
  background: var(--emr-gray-400);
  border-radius: var(--emr-border-radius-sm);
}

.emr-scrollbar::-webkit-scrollbar-thumb:hover {
  background: var(--emr-gray-500);
}

/* Hide scrollbar but keep functionality */
.emr-scrollbar-hidden {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.emr-scrollbar-hidden::-webkit-scrollbar {
  display: none;
}

/* ==================== PRINT STYLES ==================== */
/* Print-specific styles for form viewer and PDF export */
@media print {
  /* Hide non-printable elements */
  .no-print,
  button,
  nav,
  header:not(.print-header),
  .mantine-AppShell-header,
  .mantine-AppShell-navbar,
  .mantine-AppShell-aside,
  .mantine-AppShell-footer,
  [data-testid="topnav"],
  [data-testid="main-menu"],
  [data-testid="submenu"],
  .emr-action-buttons,
  .mantine-Modal-root,
  .mantine-Notification-root {
    display: none !important;
  }

  /* Show only print-specific headers */
  .print-only {
    display: block !important;
  }

  /* Reset page layout */
  html,
  body {
    height: auto !important;
    min-height: auto !important;
    overflow: visible !important;
  }

  #root {
    min-height: auto !important;
  }

  /* Page setup */
  @page {
    size: A4 portrait;
    margin: 20mm 15mm;
  }

  /* Main content area */
  .mantine-AppShell-main,
  [data-testid="form-viewer-view"] {
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Form content styling */
  [data-testid="form-content"],
  [data-testid="patient-info-card"],
  [data-testid="form-metadata"] {
    box-shadow: none !important;
    border: 1px solid var(--emr-gray-300) !important;
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Typography adjustments for print */
  body {
    font-size: 11pt !important;
    line-height: 1.4 !important;
    color: #000 !important;
    background: #fff !important;
  }

  h1, h2, h3, h4, h5, h6 {
    color: #000 !important;
    page-break-after: avoid;
  }

  /* Ensure links are visible */
  a {
    color: #000 !important;
    text-decoration: underline !important;
  }

  /* Preserve form field borders */
  .mantine-Paper-root,
  .mantine-Card-root {
    border: 1px solid var(--emr-gray-300) !important;
    box-shadow: none !important;
  }

  /* Patient info card styling */
  [data-testid="patient-info-card"] {
    background-color: #f8f8f8 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Status badges */
  .mantine-Badge-root {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Signature images */
  img[data-testid*="signature"] {
    max-width: 200px;
    border: 1px solid var(--emr-gray-300);
  }

  /* Footer for printed pages */
  .print-footer {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    text-align: center;
    font-size: 9pt;
    color: var(--emr-gray-500);
    border-top: 1px solid var(--emr-gray-300);
    padding-top: 5mm;
  }

  /* Page breaks */
  .print-page-break {
    page-break-before: always;
  }

  .print-avoid-break {
    page-break-inside: avoid;
  }

  /* Form sections */
  .form-section {
    page-break-inside: avoid;
    margin-bottom: 10mm;
  }

  /* Tables */
  table {
    border-collapse: collapse !important;
  }

  th, td {
    border: 1px solid var(--emr-gray-300) !important;
  }

  thead {
    display: table-header-group;
  }

  tr {
    page-break-inside: avoid;
  }
}

/* ==================== RESPONSIVE FORM BUILDER STYLES (T159) ==================== */
/* Mobile-first responsive utilities for form builder components */

/* Hide on specific breakpoints */
@media (max-width: 768px) {
  .emr-hide-mobile {
    display: none !important;
  }
}

@media (min-width: 769px) and (max-width: 1024px) {
  .emr-hide-tablet {
    display: none !important;
  }
}

@media (min-width: 1025px) {
  .emr-hide-desktop {
    display: none !important;
  }
}

/* Show only on specific breakpoints */
.emr-show-only-mobile {
  display: none;
}

@media (max-width: 768px) {
  .emr-show-only-mobile {
    display: block;
  }
}

/* Stack children vertically on mobile */
.emr-stack-mobile {
  display: flex;
  flex-direction: row;
  gap: var(--emr-spacing-md);
}

@media (max-width: 768px) {
  .emr-stack-mobile {
    flex-direction: column;
  }
}

/* Touch-friendly sizing (44px minimum tap target) */
.emr-touch-target {
  min-height: 44px;
  min-width: 44px;
  padding: 12px 16px;
}

/* Form builder panel layout */
.emr-form-builder-layout {
  display: grid;
  grid-template-columns: 250px 1fr 300px;
  gap: var(--emr-spacing-md);
  height: calc(100vh - var(--emr-topnav-height) - var(--emr-mainmenu-height) - var(--emr-submenu-height));
}

@media (max-width: 1024px) {
  .emr-form-builder-layout {
    grid-template-columns: 200px 1fr;
  }
}

@media (max-width: 768px) {
  .emr-form-builder-layout {
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr;
  }
}

/* Form builder palette panel */
.emr-form-palette {
  background: var(--emr-gray-50);
  border-radius: var(--emr-border-radius);
  padding: var(--emr-spacing-md);
  overflow-y: auto;
}

@media (max-width: 768px) {
  .emr-form-palette {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 85%;
    max-width: 320px;
    z-index: 1001;
    transform: translateX(-100%);
    transition: transform var(--emr-transition-base);
    box-shadow: var(--emr-shadow-xl);
  }

  .emr-form-palette.open {
    transform: translateX(0);
  }
}

/* Form builder canvas */
.emr-form-canvas {
  background: var(--emr-gray-50);
  border-radius: var(--emr-border-radius);
  padding: var(--emr-spacing-lg);
  overflow-y: auto;
}

@media (max-width: 768px) {
  .emr-form-canvas {
    padding: var(--emr-spacing-sm);
  }
}

/* Form builder properties panel */
.emr-form-properties {
  background: var(--emr-gray-50);
  border-radius: var(--emr-border-radius);
  padding: var(--emr-spacing-md);
  overflow-y: auto;
}

@media (max-width: 1024px) {
  .emr-form-properties {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    width: 85%;
    max-width: 350px;
    z-index: 1001;
    transform: translateX(100%);
    transition: transform var(--emr-transition-base);
    box-shadow: var(--emr-shadow-xl);
  }

  .emr-form-properties.open {
    transform: translateX(0);
  }
}

/* Mobile panel overlay */
.emr-panel-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
}

@media (max-width: 768px) {
  .emr-panel-overlay.visible {
    display: block;
  }
}

/* Floating action button for mobile */
.emr-fab {
  position: fixed;
  bottom: 24px;
  right: 24px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--emr-gradient-primary);
  color: white;
  box-shadow: var(--emr-shadow-lg);
  cursor: pointer;
  z-index: 999;
  border: none;
  transition: transform var(--emr-transition-fast);
}

.emr-fab:hover {
  transform: scale(1.05);
}

.emr-fab:active {
  transform: scale(0.95);
}

@media (min-width: 1025px) {
  .emr-fab {
    display: none;
  }
}

/* Form field cards for mobile */
.emr-field-card {
  background: white;
  border-radius: var(--emr-border-radius);
  padding: var(--emr-spacing-md);
  margin-bottom: var(--emr-spacing-sm);
  box-shadow: var(--emr-shadow-sm);
  cursor: pointer;
  transition: box-shadow var(--emr-transition-fast);
}

.emr-field-card:hover {
  box-shadow: var(--emr-shadow-md);
}

.emr-field-card.selected {
  border: 2px solid var(--emr-accent);
  box-shadow: var(--emr-shadow-md);
}

@media (max-width: 768px) {
  .emr-field-card {
    padding: var(--emr-spacing-lg);
  }
}

/* Responsive form input sizing */
.emr-responsive-input {
  min-height: 40px;
}

@media (max-width: 768px) {
  .emr-responsive-input {
    min-height: 44px;
    font-size: 16px; /* Prevents iOS zoom on focus */
  }
}

/* Responsive modal sizing */
@media (max-width: 768px) {
  .emr-responsive-modal {
    max-width: 100% !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    border-radius: 0 !important;
  }
}

/* Print utility classes */
.print-only {
  display: none;
}

.print-header {
  display: none;
}

@media print {
  .print-header {
    display: block !important;
    text-align: center;
    margin-bottom: 15mm;
  }

  .print-header h1 {
    font-size: 18pt;
    margin: 0 0 5mm 0;
  }

  .print-header .print-date {
    font-size: 10pt;
    color: var(--emr-gray-600);
  }
}
